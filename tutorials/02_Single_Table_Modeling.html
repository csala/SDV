

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Single Table Modeling &#8212; SDV 0.3.7.dev0 documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../_static/SDV-logo-b.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Relational Data Modeling" href="03_Relational_Data_Modeling.html" />
    <link rel="prev" title="User Guides" href="../user_guides/index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../index.html">
      <img src="../_static/SDV-logo.png" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../getting_started/index.html">Getting Started</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../user_guides/index.html">User Guides</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../api_reference/index.html">API Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../developer_guides/index.html">Developer Guides</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../history.html">Release Notes</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/sdv-dev/SDV" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/sdv_dev" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
        
          
              <li class="active">
                  <a href="">Single Table Modeling</a>
              </li>
          
        
          
              <li class="">
                  <a href="03_Relational_Data_Modeling.html">Relational Data Modeling</a>
              </li>
          
        
          
              <li class="">
                  <a href="../user_guides/metadata.html">Working with Metadata</a>
              </li>
          
        
      
      
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#Quick-usage" class="nav-link">Quick usage</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#Generate-synthetic-data-from-the-model" class="nav-link">Generate synthetic data from the model</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#Let's-consider-using-CTGAN" class="nav-link">Letâ€™s consider using CTGAN</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#id1" class="nav-link">Generate synthetic data from the model</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#Frequently-encountered-needs" class="nav-link">Frequently encountered needs</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#How-can-I-evaluate-the-quality-of-my-synthetic-data?" class="nav-link">How can I evaluate the quality of my synthetic data?</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 5.5ex;
    padding-top: 0.3rem;
    padding-right: 0.3rem;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 0.3rem;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Single-Table-Modeling">
<h1>Single Table Modeling<a class="headerlink" href="#Single-Table-Modeling" title="Permalink to this headline">Â¶</a></h1>
<p><strong>SDV</strong> supports modeling single table datasets. It provides unique features for making it easy for the user to learn models and synthesize datasets. Some important features of sdv.tables include:</p>
<ul class="simple">
<li><p>Support for tables with primarykey</p></li>
<li><p>Support to anonymize certain fields like addresses, emails, phone numbers, names and other PII information. We use faker library for this. The full list of categories supported corresponds to the <code class="docutils literal notranslate"><span class="pre">Faker</span></code> library <a class="reference external" href="https://faker.readthedocs.io/en/master/providers.html">provider names</a>.</p></li>
<li><p>Support for a number of different data types - categorical, numerical, discrete-ordinal and datetimes.</p></li>
<li><p>Support multiple types of statistical and deep learning models:</p></li>
<li><p>GaussianCopula: A tool to model multivariate distributions using <a class="reference external" href="https://en.wikipedia.org/wiki/Copula_%28probability_theory%29">copula functions</a>. Based on our <a class="reference external" href="https://github.com/sdv-dev/Copulas">Copulas Library</a>.</p></li>
<li><p>CTGAN: A GAN-based Deep Learning data synthesizer that can generate synthetic tabular data with high fidelity. Based on our <a class="reference external" href="https://github.com/sdv-dev/CTGAN">CTGAN Library</a>.</p></li>
</ul>
<p><strong>Note:</strong> We are adding a number of additional features and functionality to make it easy to model single table datasets. For example, we are adding ways for users to add inter-column constraints . If you find a unique use case that we do not support consider suggesting and adding examples here.</p>
<div class="section" id="Quick-usage">
<h2>Quick usage<a class="headerlink" href="#Quick-usage" title="Permalink to this headline">Â¶</a></h2>
<p>Letâ€™s consider a dataset from our demo datasets.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">sdv</span> <span class="kn">import</span> <span class="n">load_demo</span>

<span class="n">users</span> <span class="o">=</span> <span class="n">load_demo</span><span class="p">()[</span><span class="s1">&#39;users&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>This will return a table with 4 fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">user_id</span></code>: A unique identifier of the user.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">country</span></code>: A 2 letter code of the country of residence of the user.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gender</span></code>: A single letter code, <code class="docutils literal notranslate"><span class="pre">M</span></code> or <code class="docutils literal notranslate"><span class="pre">F</span></code>, indicating the user gender. Note that this demo simulates the case where some users did not indicate the gender, which resulted in empty data values in some rows.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">age</span></code>: The age of the user, in years.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">users</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user_id</th>
      <th>country</th>
      <th>gender</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>US</td>
      <td>M</td>
      <td>34</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>UK</td>
      <td>F</td>
      <td>23</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>ES</td>
      <td>None</td>
      <td>44</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>UK</td>
      <td>M</td>
      <td>22</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>US</td>
      <td>F</td>
      <td>54</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>DE</td>
      <td>M</td>
      <td>57</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6</td>
      <td>BG</td>
      <td>F</td>
      <td>45</td>
    </tr>
    <tr>
      <th>7</th>
      <td>7</td>
      <td>ES</td>
      <td>None</td>
      <td>41</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8</td>
      <td>FR</td>
      <td>F</td>
      <td>23</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9</td>
      <td>UK</td>
      <td>None</td>
      <td>30</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We notice that there are some additional properties in this dataset:</p>
<ul class="simple">
<li><p>First, <code class="docutils literal notranslate"><span class="pre">user_id</span></code> field in our table is the <code class="docutils literal notranslate"><span class="pre">primary_key</span></code> and each row has a <code class="docutils literal notranslate"><span class="pre">unique</span></code> value, so we do not want our model to attempt to learn it.</p></li>
<li><p>Second, letâ€™s say we want to <code class="docutils literal notranslate"><span class="pre">anonymize</span></code> the countries of residence of our <code class="docutils literal notranslate"><span class="pre">users</span></code>, to avoid disclosing such information.</p></li>
<li><p>Third, we notice that there is missing data for the <code class="docutils literal notranslate"><span class="pre">gender</span></code> column.</p></li>
</ul>
<p>Let us use the <code class="docutils literal notranslate"><span class="pre">GaussianCopula</span></code> to model this data and then sample synthetic data from the model. In order to properly model our data we will need to provide some additional information to our model. Once we have prepared the arguments for our model we are ready to import it, create an instance and fit it to our data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">sdv.tabular</span> <span class="kn">import</span> <span class="n">GaussianCopula</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">GaussianCopula</span><span class="p">(</span>
    <span class="n">primary_key</span><span class="o">=</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span>
    <span class="n">anonymize_fields</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;country&#39;</span><span class="p">:</span><span class="s1">&#39;country_code&#39;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2020-07-23 22:15:16,942 - INFO - table - Loading transformer OneHotEncodingTransformer for field country
2020-07-23 22:15:16,942 - INFO - table - Loading transformer OneHotEncodingTransformer for field gender
2020-07-23 22:15:16,943 - INFO - table - Loading transformer NumericalTransformer for field age
2020-07-23 22:15:16,979 - INFO - gaussian - Fitting GaussianMultivariate()
</pre></div></div>
</div>
<p><strong>Notice</strong> that the model <code class="docutils literal notranslate"><span class="pre">fitting</span></code> process took care of transforming the different fields using the appropriate <a class="reference external" href="http://github.com/sdv-dev/RDT">Reversible Data Transforms</a> to ensure that the data has a format that the GaussianMultivariate model from the <a class="reference external" href="https://github.com/sdv-dev/Copulas">copulas</a> library can handle.</p>
</div>
<div class="section" id="Generate-synthetic-data-from-the-model">
<h2>Generate synthetic data from the model<a class="headerlink" href="#Generate-synthetic-data-from-the-model" title="Permalink to this headline">Â¶</a></h2>
<p>Once the modeling has finished you are ready to generate new synthetic data by calling the <code class="docutils literal notranslate"><span class="pre">sample</span></code> method from your model.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sampled</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>This will return a table identical to the one which the model was fitted on, but filled with new data which resembles the original one.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sampled</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user_id</th>
      <th>country</th>
      <th>gender</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>GQ</td>
      <td>M</td>
      <td>25</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>BE</td>
      <td>M</td>
      <td>57</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>BE</td>
      <td>F</td>
      <td>33</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>SN</td>
      <td>F</td>
      <td>37</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>GQ</td>
      <td>M</td>
      <td>37</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><strong>Note:</strong> You can control the number of rows by specifying the number of <code class="docutils literal notranslate"><span class="pre">samples</span></code> in the <code class="docutils literal notranslate"><span class="pre">model.sample(&lt;num_rows&gt;)</span></code>. To test, try <code class="docutils literal notranslate"><span class="pre">model.sample(10000)</span></code>. Note that the original table only had 10 rows.</p>
</div>
<div class="section" id="Let's-consider-using-CTGAN">
<h2>Letâ€™s consider using CTGAN<a class="headerlink" href="#Let's-consider-using-CTGAN" title="Permalink to this headline">Â¶</a></h2>
<p>In this second part of the tutorial we will be using the CTGAN model to learn the data from the demo dataset called <code class="docutils literal notranslate"><span class="pre">census</span></code>, which is based on the <a class="reference external" href="'https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data'">UCI Adult Census Dataset</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">sdv</span> <span class="kn">import</span> <span class="n">load_demo</span>

<span class="n">census</span> <span class="o">=</span> <span class="n">load_demo</span><span class="p">(</span><span class="s1">&#39;census&#39;</span><span class="p">)[</span><span class="s1">&#39;census&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2020-07-23 22:15:18,538 - INFO - __init__ - Loading table census
</pre></div></div>
</div>
<p>This will return a table with several rows of multiple data types:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">census</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>fnlwgt</th>
      <th>education</th>
      <th>education-num</th>
      <th>marital-status</th>
      <th>occupation</th>
      <th>relationship</th>
      <th>race</th>
      <th>sex</th>
      <th>capital-gain</th>
      <th>capital-loss</th>
      <th>hours-per-week</th>
      <th>native-country</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>39</td>
      <td>State-gov</td>
      <td>77516</td>
      <td>Bachelors</td>
      <td>13</td>
      <td>Never-married</td>
      <td>Adm-clerical</td>
      <td>Not-in-family</td>
      <td>White</td>
      <td>Male</td>
      <td>2174</td>
      <td>0</td>
      <td>40</td>
      <td>United-States</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>1</th>
      <td>50</td>
      <td>Self-emp-not-inc</td>
      <td>83311</td>
      <td>Bachelors</td>
      <td>13</td>
      <td>Married-civ-spouse</td>
      <td>Exec-managerial</td>
      <td>Husband</td>
      <td>White</td>
      <td>Male</td>
      <td>0</td>
      <td>0</td>
      <td>13</td>
      <td>United-States</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>2</th>
      <td>38</td>
      <td>Private</td>
      <td>215646</td>
      <td>HS-grad</td>
      <td>9</td>
      <td>Divorced</td>
      <td>Handlers-cleaners</td>
      <td>Not-in-family</td>
      <td>White</td>
      <td>Male</td>
      <td>0</td>
      <td>0</td>
      <td>40</td>
      <td>United-States</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>3</th>
      <td>53</td>
      <td>Private</td>
      <td>234721</td>
      <td>11th</td>
      <td>7</td>
      <td>Married-civ-spouse</td>
      <td>Handlers-cleaners</td>
      <td>Husband</td>
      <td>Black</td>
      <td>Male</td>
      <td>0</td>
      <td>0</td>
      <td>40</td>
      <td>United-States</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>4</th>
      <td>28</td>
      <td>Private</td>
      <td>338409</td>
      <td>Bachelors</td>
      <td>13</td>
      <td>Married-civ-spouse</td>
      <td>Prof-specialty</td>
      <td>Wife</td>
      <td>Black</td>
      <td>Female</td>
      <td>0</td>
      <td>0</td>
      <td>40</td>
      <td>Cuba</td>
      <td>&lt;=50K</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>In this case there is no <code class="docutils literal notranslate"><span class="pre">primary_key</span></code> to setup and we will not be <code class="docutils literal notranslate"><span class="pre">anonymizing</span></code> anything, so the only thing that we will pass to the <code class="docutils literal notranslate"><span class="pre">CTGAN</span></code> model is the <code class="docutils literal notranslate"><span class="pre">number</span> <span class="pre">of</span> <span class="pre">epochs</span></code> that we want it to perform when it learns the data, which we will keep low to make this execution quick.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">sdv.tabular</span> <span class="kn">import</span> <span class="n">CTGAN</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">CTGAN</span><span class="p">(</span><span class="n">epochs</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Once the instance is created, we can fit it to our data.</p>
<p><strong>Note</strong> that this process might take some time to finish, especially on non-GPU enabled systems, so in this case we will be passing only a <code class="docutils literal notranslate"><span class="pre">subsample</span></code> of the data to accelerate the process.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">census</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2020-07-23 22:15:18,944 - INFO - table - Loading transformer NumericalTransformer for field age
2020-07-23 22:15:18,945 - INFO - table - Loading transformer LabelEncodingTransformer for field workclass
2020-07-23 22:15:18,945 - INFO - table - Loading transformer NumericalTransformer for field fnlwgt
2020-07-23 22:15:18,946 - INFO - table - Loading transformer LabelEncodingTransformer for field education
2020-07-23 22:15:18,946 - INFO - table - Loading transformer NumericalTransformer for field education-num
2020-07-23 22:15:18,947 - INFO - table - Loading transformer LabelEncodingTransformer for field marital-status
2020-07-23 22:15:18,947 - INFO - table - Loading transformer LabelEncodingTransformer for field occupation
2020-07-23 22:15:18,947 - INFO - table - Loading transformer LabelEncodingTransformer for field relationship
2020-07-23 22:15:18,948 - INFO - table - Loading transformer LabelEncodingTransformer for field race
2020-07-23 22:15:18,948 - INFO - table - Loading transformer LabelEncodingTransformer for field sex
2020-07-23 22:15:18,948 - INFO - table - Loading transformer NumericalTransformer for field capital-gain
2020-07-23 22:15:18,949 - INFO - table - Loading transformer NumericalTransformer for field capital-loss
2020-07-23 22:15:18,949 - INFO - table - Loading transformer NumericalTransformer for field hours-per-week
2020-07-23 22:15:18,949 - INFO - table - Loading transformer LabelEncodingTransformer for field native-country
2020-07-23 22:15:18,950 - INFO - table - Loading transformer LabelEncodingTransformer for field income
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Epoch 1, Loss G: 1.9722, Loss D: 0.0039
Epoch 2, Loss G: 2.0078, Loss D: -0.0528
Epoch 3, Loss G: 1.9806, Loss D: -0.1373
Epoch 4, Loss G: 1.9688, Loss D: -0.1716
Epoch 5, Loss G: 1.8883, Loss D: -0.3181
Epoch 6, Loss G: 1.8073, Loss D: -0.4152
Epoch 7, Loss G: 1.8015, Loss D: -0.5423
Epoch 8, Loss G: 1.6593, Loss D: -0.6838
Epoch 9, Loss G: 1.6784, Loss D: -0.7575
Epoch 10, Loss G: 1.6479, Loss D: -0.8074
</pre></div></div>
</div>
<div class="section" id="id1">
<h3>Generate synthetic data from the model<a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h3>
<p>Once the modeling has finished you are ready to generate new synthetic data by calling the <code class="docutils literal notranslate"><span class="pre">sample</span></code> method from our model just like we did with the <code class="docutils literal notranslate"><span class="pre">GaussianCopula</span></code> model.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sampled</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>This will return a table identical to the one which the model was fitted on, but filled with <code class="docutils literal notranslate"><span class="pre">synthetic</span></code> data which resembles the original one.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sampled</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>fnlwgt</th>
      <th>education</th>
      <th>education-num</th>
      <th>marital-status</th>
      <th>occupation</th>
      <th>relationship</th>
      <th>race</th>
      <th>sex</th>
      <th>capital-gain</th>
      <th>capital-loss</th>
      <th>hours-per-week</th>
      <th>native-country</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>55</td>
      <td>?</td>
      <td>54620</td>
      <td>HS-grad</td>
      <td>9</td>
      <td>Never-married</td>
      <td>Prof-specialty</td>
      <td>Unmarried</td>
      <td>Amer-Indian-Eskimo</td>
      <td>Male</td>
      <td>809</td>
      <td>-4</td>
      <td>-4</td>
      <td>United-States</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>1</th>
      <td>65</td>
      <td>Federal-gov</td>
      <td>238</td>
      <td>Bachelors</td>
      <td>9</td>
      <td>Married-spouse-absent</td>
      <td>Exec-managerial</td>
      <td>Own-child</td>
      <td>Black</td>
      <td>Male</td>
      <td>816</td>
      <td>-37</td>
      <td>45</td>
      <td>Vietnam</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>2</th>
      <td>63</td>
      <td>?</td>
      <td>-11877</td>
      <td>Prof-school</td>
      <td>9</td>
      <td>Never-married</td>
      <td>Prof-specialty</td>
      <td>Unmarried</td>
      <td>White</td>
      <td>Female</td>
      <td>166785</td>
      <td>1684</td>
      <td>33</td>
      <td>Poland</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>3</th>
      <td>21</td>
      <td>Local-gov</td>
      <td>-53388</td>
      <td>Preschool</td>
      <td>1</td>
      <td>Married-civ-spouse</td>
      <td>?</td>
      <td>Own-child</td>
      <td>Other</td>
      <td>Male</td>
      <td>554</td>
      <td>4</td>
      <td>51</td>
      <td>Italy</td>
      <td>&gt;50K</td>
    </tr>
    <tr>
      <th>4</th>
      <td>41</td>
      <td>Private</td>
      <td>117452</td>
      <td>7th-8th</td>
      <td>4</td>
      <td>Widowed</td>
      <td>Farming-fishing</td>
      <td>Other-relative</td>
      <td>White</td>
      <td>Female</td>
      <td>6270</td>
      <td>12</td>
      <td>38</td>
      <td>Scotland</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>5</th>
      <td>59</td>
      <td>Private</td>
      <td>109067</td>
      <td>11th</td>
      <td>8</td>
      <td>Married-civ-spouse</td>
      <td>Tech-support</td>
      <td>Not-in-family</td>
      <td>White</td>
      <td>Female</td>
      <td>-296</td>
      <td>-7</td>
      <td>39</td>
      <td>Hungary</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>6</th>
      <td>55</td>
      <td>Local-gov</td>
      <td>133741</td>
      <td>Some-college</td>
      <td>9</td>
      <td>Widowed</td>
      <td>Adm-clerical</td>
      <td>Own-child</td>
      <td>White</td>
      <td>Male</td>
      <td>27743</td>
      <td>8</td>
      <td>40</td>
      <td>France</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>7</th>
      <td>52</td>
      <td>Federal-gov</td>
      <td>48567</td>
      <td>7th-8th</td>
      <td>8</td>
      <td>Divorced</td>
      <td>Sales</td>
      <td>Other-relative</td>
      <td>Black</td>
      <td>Male</td>
      <td>196</td>
      <td>19</td>
      <td>46</td>
      <td>Hong</td>
      <td>&lt;=50K</td>
    </tr>
    <tr>
      <th>8</th>
      <td>24</td>
      <td>Federal-gov</td>
      <td>135607</td>
      <td>9th</td>
      <td>-1</td>
      <td>Married-civ-spouse</td>
      <td>Sales</td>
      <td>Not-in-family</td>
      <td>White</td>
      <td>Male</td>
      <td>465</td>
      <td>-26</td>
      <td>38</td>
      <td>Vietnam</td>
      <td>&gt;50K</td>
    </tr>
    <tr>
      <th>9</th>
      <td>46</td>
      <td>Self-emp-not-inc</td>
      <td>-57277</td>
      <td>12th</td>
      <td>12</td>
      <td>Separated</td>
      <td>Adm-clerical</td>
      <td>Own-child</td>
      <td>Amer-Indian-Eskimo</td>
      <td>Male</td>
      <td>576</td>
      <td>0</td>
      <td>3</td>
      <td>Puerto-Rico</td>
      <td>&gt;50K</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
</div>
<div class="section" id="Frequently-encountered-needs">
<h2>Frequently encountered needs<a class="headerlink" href="#Frequently-encountered-needs" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="How-can-I-evaluate-the-quality-of-my-synthetic-data?">
<h3>How can I evaluate the quality of my synthetic data?<a class="headerlink" href="#How-can-I-evaluate-the-quality-of-my-synthetic-data?" title="Permalink to this headline">Â¶</a></h3>
<p>In some cases, you will want to know how similar the generated is to the original one.</p>
<p>For this you can use the <code class="docutils literal notranslate"><span class="pre">evaluation</span></code> framework included in SDV by simply importing the <code class="docutils literal notranslate"><span class="pre">sdv.evaluation.evaluate</span></code> function and calling it passing it both the synthetic and the real data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">sdv.evaluation</span> <span class="kn">import</span> <span class="n">evaluate</span>

<span class="n">evaluate</span><span class="p">(</span><span class="n">sampled</span><span class="p">,</span> <span class="n">census</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
-144.80667199073469
</pre></div></div>
</div>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="../user_guides/index.html" title="previous page">User Guides</a>
    <a class='right-next' id="next-link" href="03_Relational_Data_Modeling.html" title="next page">Relational Data Modeling</a>

              </div>
              
          </main>
          

      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2018, MIT Data To AI Lab.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.1.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>